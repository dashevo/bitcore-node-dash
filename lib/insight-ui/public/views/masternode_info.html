<div data-ng-include src="'views/includes/connection.html'"></div>

<div class="search-mini search-mini-right wrap" data-ng-include src="'views/includes/search.html'"></div>

<section class="table wrap" data-ng-controller="MasternodesController" data-ng-init="list()">
  <div class="cn">
    <h2 class="title" translate>Masternode Info</h2>
    <p class="desc">There are currently {{ nodes.length }} total Masternodes</p>

    <h2 class="desc" data-ng-show="!nodes.length && !loading" translate>No Masternodes yet.</h2>

    <ul class="master">
      <li class="master__block" data-ng-repeat='tier in tiers'>
        <p class="master__title">{{ tier.key }}</p>
        <p class="master__count">{{ tier.count }}</p>
      </li>
    </ul>

    <div class="table__wrap-cn">
      <ul class="table__list">
        <li class="table__li-head">
          <ul class="table__li-head__list masternode">
            <li class="table__head__li" translate>Tier</li>
            <li class="table__head__li" translate>Status</li>
            <li class="table__head__li" translate>Active time</li>
            <li class="table__head__li" translate>Last seen</li>
            <li class="table__head__li" translate>Transaction hash</li>
            <li class="table__head__li" translate>Address</li>
            <li class="table__head__li" translate>Last paid</li>
          </ul>
        </li>

        <li class="table__li" data-ng-repeat='node in nodesList track by $index'>
          <header class="table__head masternode">
            <ul class="table__head__list">
              <li class="table__head__li" translate>Tier</li>
              <li class="table__head__li" translate>Status</li>
              <li class="table__head__li" translate>Active time</li>
              <li class="table__head__li" translate>Last seen</li>
              <li class="table__head__li" translate>Transaction hash</li>
              <li class="table__head__li" translate>Address</li>
              <li class="table__head__li" translate>Last paid</li>
            </ul>
          </header>
          <div class="table__content">
            <ul class="table__content__list masternode">
              <li class="table__content__li">
                {{ node.tier }}
              </li>
              <li class="table__content__li">
                {{ node.status }}
              </li>
              <li class="table__content__li">
                {{ node.activetime }}
              </li>
              <li class="table__content__li">
                {{ node.lastseen }}
              </li>
              <li class="table__content__li">
                <a href="tx/{{node.txhash}}" class="link-blue">{{ node.txhash }}</a>
              </li>
              <li class="table__content__li">
                <a href="address/{{node.addr}}" class="link-blue">{{ node.addr }}</a>
              </li>
              <li class="table__content__li">
                {{ node.lastpaid }}
              </li>
            </ul>
          </div>
        </li>

      </ul>
      <div class="pagination">
        <ul class="pagination__list" data-ng-if="pages.length > 1">
          <li>
            <button type="button" class="pagination__btn" data-ng-class="{disabled: currentPage == 1}" data-ng-click="setCurrentPage(1)"><<</button>
          </li>
          <li>
            <button type="button" class="pagination__btn" data-ng-class="{disabled: currentPage == 1}" data-ng-click="setCurrentPage(currentPage-1)"><</button>
          </li>
          <li>
            <div class="pagination__btn" data-ng-show="currentPage > innerPageRange + 1">...</div>
          </li>
          <li data-ng-repeat="page in pages">
            <button type="button" class="pagination__btn" data-ng-class="{active: currentPage == page.page}" data-ng-click="setCurrentPage(page.page)">{{page.page}}</button>
          </li>
          <li>
            <div class="pagination__btn" data-ng-show="currentPage < totalPages - innerPageRange">...</div>
          </li>
          <li>
            <button type="button" class="pagination__btn" data-ng-class="{disabled: currentPage == totalPages}" data-ng-click="setCurrentPage(currentPage+1)">></button>
          </li>
          <li>
            <button type="button" class="pagination__btn" data-ng-class="{disabled: currentPage == totalPages}" data-ng-click="setCurrentPage(pages.length)">>></button>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <div
      class="block__details__bl"
      data-ng-if="error && error.length"
  >
    <header class="not">
      <span><span translate>Error message:</span> {{error}}</span>
    </header>
  </div>

  <div class="spinner" data-ng-show="loading">
    <div class="spin"></div>
    <div class="spinner__text" translate>Loading masternodes ...</div>
  </div>
</section>
